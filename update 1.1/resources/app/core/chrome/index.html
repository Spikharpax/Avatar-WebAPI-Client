<!DOCTYPE html>
<html>
	<head>
		<link rel="A.V.A.T.A.R" href="favicon.ico"/>
		<link rel="stylesheet" href="./node_modules/xel/themes/material.css"/>
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<link rel='stylesheet' href='./node_modules/jquery-ui-1.12.1/jquery-ui.css'>
		<link rel="stylesheet" type="text/css" href="./speech.css">
		<link rel="stylesheet" type="text/css" href="./properties.css">
		<script src="./node_modules/xel/xel.min.js"></script>
	</head>
	<body id="body">
		<img id="graph" src="./images/graph.gif"/>
		<div id="outer">
		  	<button id="properties" class="styled" type="button">FONCTIONS VITALES</button>
				<button id="full-screen" type="button">MINIMAZE / MAXIMAZE</button>
				<button id="son-on-off" type="button">ECOUTE ON / OFF / RESET</button>
				<button id="avatar-close" type="button">DECONNEXION</button>
		</div>
		<div class="HALL H-panel">
			<div class="HALL nameplate" id="client"></div>
		  <div class="HALL H-base" id="Hall">
		    <div class="HALL H-lens">
		      <div class="HALL H-reflections"></div>
		    </div>
		    <div class="HALL H-animation"></div>
		  </div>
		  <div class="HALL speaker"></div>
		</div>
		<div id="console"></div>

		<div id="properties-form" class="properties-form">
			<label id="form-name">Fonctions vitales</label>
		  <div class="window-controls">
		      <i id="minmax-properties" class="material-icons">crop_din</i>
		      <i id="close-properties" class="material-icons">close</i>
		   </div>
		   <div id="properties-content">
				 <x-tabs id="properties-tabs" centered>
					 <x-tab class="xtab" selected onclick="showTab(event, 'client-form')">
						 <x-label>Client</x-label>
					 </x-tab>
					 <x-tab class="xtab" onclick="showTab(event, 'serveur-form')">
						 <x-label>Serveur</x-label>
					 </x-tab>
					 <x-tab class="xtab" onclick="showTab(event, 'chrome-form')">
						 <x-label>Interface Web</x-label>
					 </x-tab>
					 <x-tab class="xtab" onclick="showTab(event, 'tts-form')">
						 <x-label>Dialogues</x-label>
					 </x-tab>
					 <x-tab class="xtab" onclick="showTab(event, 'voices-form')">
						 <x-label>Voix</x-label>
					 </x-tab>
					 <x-tab class="xtab" onclick="showTab(event, 'intercom-form')">
						 <x-label>Intercom</x-label>
					 </x-tab>
				</x-tabs>
				<div id="properties-main">
					<form class="tabform" id="client-form">
						<x-input skin="flat" size="100" maxlength="64" id="client-name" class="input-white component-top component-left">
							 <x-label>Nom du client</x-label>
						</x-input>

						<x-label class="component-left component-top x-label-normal">Entrez les mots-clés de déclenchement de l'écoute:</x-label>
						<x-taginput id="AKA-list" class="component-left"></x-taginput>

						<x-label class="component-left component-top x-label-normal">Entrez les mots séparateurs pour passer plusieurs actions dans la même phrase:</x-label>
						<x-taginput id="separator-actions-list" class="component-left"></x-taginput>

						<x-label class="component-left component-top x-label-normal">Entrez des phrases qui permettent de débloquer l'écoute si celle-ci ne répond plus (crash d'un plugin ou écoute non restituée par un end() après un speak(), etc...):</x-label>
						<x-taginput id="refresh-AKA" class="component-left"></x-taginput>

						<x-box>
						  <x-switch class="component-left component-top" id="server-speak"></x-switch>
						  <x-label class="component-top x-label-normal" for="server-speak">Les dialogues du client sont redirigés vers des enceintes Wifi controlées par un plug-in</x-label>
						</x-box>

						<x-box>
						  <x-switch class="component-left component-top" id="loop-mode"></x-switch>
						  <x-label class="component-top x-label-normal" for="loop-mode">Le client boucle entre chaque règle exécutée.</x-label>
						</x-box>

						<x-label class="component-left component-top x-label-normal">Entrez le délais (en secondes) avant que l'écoute ne soit intérrompue automatiquement:</x-label>
						<x-numberinput class="component-left" id="timout-listen" value="8" min="5" max="30">
						  <x-stepper disabled="decrement"></x-stepper>
						</x-numberinput>

						<x-label class="component-left component-top x-label-normal">Entrez le délais (en millisecondes) avant et après le speak du client:</x-label>
						<x-numberinput class="component-left" id="timout-speak" value="500" min="0" max="5000">
						  <x-stepper disabled="decrement"></x-stepper>
						</x-numberinput>
						<x-label class="component-left x-label-mini">Utile si vous constatez que les speak ne sont pas synchronisés.</x-label>

						<x-box>
						  <x-switch class="component-left component-top" id="current-mode"></x-switch>
						  <x-label class="component-top x-label-normal" for="current-mode">Le client ne se déclenche pas si un autre client proche a déclenché l'écoute avant lui.</x-label>
						</x-box>


						<x-box>
						  <x-switch class="component-left component-top" id="set-volume"></x-switch>
						  <x-label class="component-top x-label-normal" for="set-volume">Le volume du microphone est ajusté avant de passer une règle.</x-label>
						</x-box>
						<x-label class="component-left x-label-normal">Entrez le volume (seulement si le volume est ajusté):</x-label>
						<x-numberinput class="component-left" id="level-micro" value="64000" min="0" max="95000">
						  <x-stepper disabled="decrement"></x-stepper>
						</x-numberinput>
						<x-label class="component-left x-label-mini">Utile si votre microphone se règle automatiquement à une valeur basse (65000=100%. 33000=50%).</x-label>

					</form>
					<form class="tabform" id="serveur-form" hidden=true>
						<x-label class="component-left component-top x-label-normal">Vous n'avez normalement pas besoin de modifier les informations de connexion avec le Serveur.</x-label>
						<x-label class="component-left x-label-normal">Ces informations sont récupérées automatiquement lorsque le client se connecte.</x-label>
						<x-label class="component-left x-label-normal">Modifiez ces valeurs uniquement pour la plage de recherche si celle-çi ne correspond pas à votre réseau ou si ensuite vous constatez que le client n'arrive pas à se connecter ou accessoirement si vous désirez changer le ports de connexion.</x-label>

						<x-input skin="flat" size="100" maxlength="14" id="IP-serveur" class="input-white component-left x-input-maxtop">
							 <x-label>Adresse IP du serveur</x-label>
						</x-input>
						<x-label class="component-left component-top x-label-normal">Entrez le port de connexion avec le serveur:</x-label>
						<x-numberinput class="component-left" id="Port-serveur" value="3000" min="1000" max="9999">
						  <x-stepper disabled="decrement"></x-stepper>
						</x-numberinput>
						<x-label class="component-left x-label-mini">Attention! Le Port de connexion coté serveur doit être identique !</x-label>

						<x-label class="component-left component-top x-label-normal">Entrez la plage de recherche automatique de l'adresse IP du serveur:</x-label>
						<x-input skin="flat" value="192.168.0.5-50"  size="100" maxlength="25" id="UDP-scan" class="input-white component-left component-top">
							 <x-label>Plage de recherche</x-label>
						</x-input>
						<x-label class="component-left x-label-normal component-mini">La plage de recherche commence toujours par les 3 premiers nombres compris entre 0 et 255 de votre réseau IPv4, séparés par des points, ce qui donne par exemple «192.168.0.».</x-label>
						<x-label class="component-left x-label-normal">La 2ème partie de la recherche est une plage d'IP définie par 2 nombres compris entre 0 et 99, séparés par un tiret, ce qui donne par exemple «5-40».</x-label>
						<x-label class="component-left x-label-normal">Dans cet exemple, le client cherchera automatiquement l'adresse IP du serveur sur le réseau dans une plage d'IP comprise entre «192.168.0.5» et «192.168.0.40»</x-label>
						<x-label class="component-left x-label-normal">Vous pouvez ajuster une plage de recherche correcte pour que le client ne scanne pas tout le réseau systématiquement.</x-label>
					</form>
					<form class="tabform" id="chrome-form" hidden=true>
						<x-label class="component-left component-top x-label-normal">Entrez le délais (en millisecondes) de chargement de l'interface:</x-label>
						<x-numberinput class="component-left" id="timeout-chrome" value="1000" min="1000" max="50000">
						  <x-stepper disabled="decrement"></x-stepper>
						</x-numberinput>
						<x-label class="component-left x-label-mini">Un petit délais pour que l'interface s'initialise correctement au démarrage.</x-label>

						<x-box>
						  <x-switch class="component-left component-top" id="pleine-page-mode"></x-switch>
						  <x-label class="component-top x-label-normal" for="pleine-page-mode">L'interface Web s'affiche pleine page au démarrage.</x-label>
						</x-box>
						<br>
						<x-label class="component-left component-top x-label-title">Test du mot-clé déclencheur:</x-label>
						<x-label class="component-left component-mini x-label-normal">Dans certains cas, la reconnaissance vocale cherche à associer ce que vous dites à une syntaxe qui n'est pas forcément ce que vous avez défini.</x-label>
						<x-label class="component-left component-mini x-label-normal">Par exemple, si vous définissez comme mot-clé "Ok Sarah", la reconnaissance pourrait reconnaitre suivant votre prononciation: "Ok ca va", il convient alors d'ajouter aussi ce terme dans les mots-clés.</x-label>
						<x-box>
							<x-switch class="component-left component-top" id="keyword-test"></x-switch>
							<x-label class="component-top x-label-normal" for="keyword-test">Activer le mode test du mot-clé déclencheur.</x-label>
						</x-box>
						<x-label class="component-left component-mini x-label-normal">1. Ouvrez ensuite la fenêtre DevTools de l'interface en appuyant sur la touche F12</x-label>
						<x-label class="component-left component-mini x-label-normal">2. Cliquez sur l'onglet "Console" puis à gauche sur "No user message"</x-label>
						<x-label class="component-left component-mini x-label-normal">3. Prononcez votre mot-clé déclencheur</x-label>
						<x-label class="component-left component-mini x-label-normal">4. A.V.A.T.A.R affiche ce qu'il a compris</x-label>
						<x-label class="component-left component-mini x-label-normal">5. Recommencez autant de fois que vous voulez</x-label>
						<x-label class="component-left component-mini x-label-normal">6. Stoppez le mode test en désactivant le mode test ou en redémarrant le client A.V.A.T.A.R</x-label>

					</form>

					<form class="tabform" id="tts-form" hidden=true>
						<x-label class="component-left component-top x-label-title">Ce que le client dit:</x-label>

						<x-label class="component-left component-mini x-label-normal">Entrez les phrases que le client peut prononcer lorsque l'écoute est déclenchée:</x-label>
						<x-taginput id="start-list" class="component-left"></x-taginput>

						<x-label class="component-left component-top x-label-normal">Entrez les phrases que le client peut prononcer lorsque le mode loop est activé:</x-label>
						<x-taginput id="loop-list" class="component-left"></x-taginput>

						<x-label class="component-left component-top x-label-normal">Entrez les phrases que le client peut prononcer lorsque vous avez intérromu le dialogue:</x-label>
						<x-taginput id="stoplisten-list" class="component-left"></x-taginput>

						<x-label class="component-left component-top x-label-normal">Entrez les phrases que le client peut prononcer lorsque vous terminez le dialogue en mode loop:</x-label>
						<x-taginput id="endloop-list" class="component-left"></x-taginput>

						<x-label class="component-left component-top x-label-normal">Entrez les phrases que le client peut prononcer lorsqu'une règle a été mal comprise:</x-label>
						<x-taginput id="restart-list" class="component-left"></x-taginput>

						<x-label class="component-left x-label-title">Ce que vous dites:</x-label>

						<x-label class="component-left component-mini x-label-normal">Entrez les phrases que vous pouvez prononcer pour intérrompre le dialogue:</x-label>
						<x-taginput id="cancel-list" class="component-left"></x-taginput>

						<x-label class="component-left component-top x-label-normal">Entrez les phrases que vous pouvez prononcer pour remercier le client en mode loop:</x-label>
						<x-taginput id="thanks-list" class="component-left"></x-taginput>
					</form>

					<form class="tabform" id="voices-form" hidden=true>

						<x-label class="component-left component-top x-label-normal">Voix courante:</x-label>
						<x-input id="voice-current" class="component-left" value="Par défaut" readonly></x-input>

						<x-label class="component-left component-top x-label-normal">Liste des voix utilisables:</x-label>
						<x-taginput id="voices-list" class="component-left"></x-taginput>
						<x-label class="component-left x-label-normal">Vous pouvez ajouter des voix à utiliser par sélection dans la liste des voix disponibles.</x-label>

						<x-label class="component-left component-top x-label-normal">Liste des voix disponibles:</x-label>
						<div class="voices-test">
							<x-select id="voices" class="component-left input-label-voices">
			        </x-select>
							<x-button class="voice-button" id="voice-test">
							  <x-label>Test</x-label>
							</x-button>
							<x-button class="voice-button" id="voice-add">
							  <x-label>Ajouter</x-label>
							</x-button>
							<x-button class="voice-button" id="voice-set-current">
							  <x-label>Courante</x-label>
							</x-button>
						</div>
						<x-label class="component-left component-mini x-label-normal">La voix "Par défaut" est la voix par défaut de la synthèse vocale Microsoft Windows et est aussi une des voix disponibles dans la liste.</x-label>
						<x-label class="component-left component-top x-label-normal">Phrase de test:</x-label>
						<x-input id="speech-voice-test" class="component-left speech-voice" value="Cette voix me va bien. Tu ne trouves pas?"></x-input>

						<x-label class="component-left component-top x-label-normal">Entrez la règle pour changer de voix:</x-label>
						<x-input id="voice-change" class="component-left speech-voice" value="Change de voix"></x-input>
						<x-label class="component-left component-mini x-label-normal">Le client utilisera la voix suivante dans l'ordre de la liste des voix utilisées.</x-label>

						<x-label class="component-left component-top x-label-normal">Entrez la vitesse de la voix:</x-label>
						<x-numberinput class="component-left" id="voice-speed" value="50" min="0" max="100">
						  <x-stepper disabled="decrement"></x-stepper>
						</x-numberinput>
						<x-label class="component-left component-top x-label-normal">Entrez le volume de la voix:</x-label>
						<x-numberinput class="component-left" id="voice-volume" value="100" min="0" max="100">
						  <x-stepper disabled="increment"></x-stepper>
						</x-numberinput>

						<x-label class="component-left component-top x-label-normal">Accessoirement, vous pouvez demander de lister vocalement les voix disponibles et les afficher sur la console du client par la règle suivante:</x-label>
						<x-input id="voice-list" class="component-left speech-voice" value="Donne-moi les voix disponibles"></x-input>

						<x-label class="component-left component-top x-label-title">A propos des voix:</x-label>
						<x-label class="component-left component-mini x-label-normal">Changer de voix n'est possible que si les dialogues ne sont pas redirigés vers des enceintes Wifi controlées par un plug-in (comme SonosPlayer). Dans ce cas, les voix sont controlées sur le serveur A.V.A.T.A.R et le définir içi n'a aucun impact.</x-label>
					</form>

					<form class="tabform" id="intercom-form" hidden=true>
						<x-label class="component-left component-top x-label-normal">Entrez l'interval de silence (en secondes) pour arrêter l'enregistrement.</x-label>
						<x-numberinput class="component-left" id="timeout-intercom" value="2" min="0" max="10">
						  <x-stepper disabled="decrement"></x-stepper>
						</x-numberinput>

						<x-box>
						  <x-switch class="component-left component-top" id="set-intercom-debug"></x-switch>
						  <x-label class="component-top x-label-normal" for="set-intercom-debug">Le mode débug est activé dans la console (réservé développeur).</x-label>
						</x-box>
					</form>
					<br>
					<div class="mgr-button">
						<x-button id="save" skin="textured">
						    <x-label>Enregistrer</x-label>
						</x-button>
						<x-button id="cancel" skin="textured">
						    <x-label>Fermer</x-label>
						</x-button>
					</div>
					<x-notification id="notification" timeout="1500"></x-notification>
				</div>
	  	</div>
		</div>
		<div class="led" id="help">
		  <div class="hilight"></div>
			<!--<span class="tooltiptext">Je peux t'aider Dave</span>-->
		</div>

		<script src="https://www.WebRTC-Experiment.com/RecordRTC.js"></script>
		<script src="https://www.webrtc-experiment.com/hark.js"></script>
		<script src="./node_modules/jquery-3.4.1/jquery-3.4.1.min.js" type="text/javascript"></script>
		<script src="./node_modules/jquery-ui-1.12.1/jquery-ui.min.js" type="text/javascript"></script>
		<script src="js/console.js"></script>
		<script src="js/script.js"></script>
		<script src="speech.js"></script>
		<!--<script src="js/sound.js"></script>-->
		<script src="js/properties.js"></script>
		<script src="js/intercom.js"></script>
	</body>
</html>
